<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Team Hanley NLP Working Group" />


<title>Exploring Text Data</title>

<script src="exploring-data_files/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="exploring-data_files/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="exploring-data_files/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="exploring-data_files/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="exploring-data_files/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="exploring-data_files/navigation-1.1/tabsets.js"></script>
<link href="exploring-data_files/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="exploring-data_files/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
      </style>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>



<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Exploring Text Data</h1>
<h4 class="author">Team Hanley NLP Working Group</h4>

</div>

<div id="TOC">
<ul>
<li><a href="#summary-statistics-with-words">Summary Statistics with Words</a></li>
<li><a href="#word-clouds-with-wordcloud">Word Clouds with wordcloud</a></li>
<li><a href="#practice-problems">Practice Problems</a></li>
<li><a href="#conclusion">Conclusion</a></li>
</ul>
</div>

<div id="summary-statistics-with-words" class="section level2">
<h2>Summary Statistics with Words</h2>
<p>The first step in any data science project should always be to get a sense of your data. For NLP, a lot of exploratory data analysis revolves around counting the frequencies of different terms and plotting them in different ways. This can be as simple as a bar chart looking at the count of distinct words, to word clouds, to something as complex as a TF-IDF.</p>
<p>Before we go any further, we first need to set up our workspace. We will primarily be working with <code>tidytext</code> to keep ourselves in the <code>tidyverse</code> and will be pulling data from <code>gutenbergr</code>, which is a repository of free classic texts. Let’s start by loading in our data, Metamorphosis by Kafka, and unnesting it into tokens.</p>
<pre class="r"><code>library(gutenbergr)
library(wordcloud)
library(ggplot2)
library(tidytext)
library(dplyr)
library(kableExtra)

meta = gutenberg_download(&quot;5200&quot;) 

tokens = meta %&gt;%
  unnest_tokens(word, text) %&gt;%
  anti_join(stop_words) </code></pre>
<p>Next we can create a simple bar plot looking at the top ten words (not including stop words of course) used in the book.</p>
<pre class="r"><code>word_count = tokens%&gt;%
  group_by(word)%&gt;%
  summarise(count = n())%&gt;%
  arrange(desc(count))%&gt;%
  slice(1:10)

ggplot(data = word_count)+
  geom_bar(aes(x = word, y = count), stat = &quot;identity&quot;,  fill = &quot;#6699cc&quot;)+
  theme_classic()</code></pre>
<p><img src="exploring-data_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
</div>
<div id="word-clouds-with-wordcloud" class="section level2">
<h2>Word Clouds with wordcloud</h2>
<p>Another way to present summary statistics is with a word cloud. For the uninitiated, a word cloud is just a collection of words with the size of the word determined by its prevalence. The natural disadvantage of this is that longer words will appear larger than smaller words, thus making them look more prevalent.</p>
<p>Actually creating the wordcloud is very easy. Just wrap a character vector in <code>wordcloud()</code>. We can remove some of the less frequent words using either the <code>min.freq</code> argument or the <code>max.words</code> argument.</p>
<pre class="r"><code>wordcloud(tokens$word, max.words = 75, colors=brewer.pal(6, &quot;Dark2&quot;))</code></pre>
<p><img src="exploring-data_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
</div>
<div id="practice-problems" class="section level2">
<h2>Practice Problems</h2>
<div id="problem-1" class="section level3">
<h3>Problem 1</h3>
<p>Load the text from Hamlet and create a bar chart depicting the 10 most frequent words from the text.</p>
<p>** Hints ** The gutenberg ID for Hamlet is 1787.</p>
</div>
<div id="solution" class="section level3">
<h3>Solution</h3>
<p>Use gutenberg_download to download the text from Hamlet by inputting the appropriate ID for Hamlet (1787). Then use unnest_tokens to tokenize the text by individual word (n=1).</p>
<pre class="r"><code>library(gutenbergr)
library(wordcloud)
library(ggplot2)
library(tidytext)
library(dplyr)
library(kableExtra)

meta = gutenberg_download(&quot;1787&quot;) 

tokens = meta %&gt;%
  unnest_tokens(word, text) %&gt;%
  anti_join(stop_words) 

word_count = tokens%&gt;%
  group_by(word)%&gt;%
  summarise(count = n())%&gt;%
  arrange(desc(count))%&gt;%
  slice(1:10)

ggplot(data = word_count)+
  geom_bar(aes(x = word, y = count), stat = &quot;identity&quot;,  fill = &quot;#6699cc&quot;)+
  theme_classic()</code></pre>
<p><img src="exploring-data_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
</div>
<div id="problem-2" class="section level3">
<h3>Problem 2</h3>
<p>Create a Wordcloud to display the most common words in Hamlet.</p>
</div>
<div id="solution-1" class="section level3">
<h3>Solution</h3>
<pre class="r"><code>wordcloud(tokens$word, max.words = 75, colors=brewer.pal(6, &quot;Dark2&quot;))</code></pre>
<p><img src="exploring-data_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
</div>
</div>
<div id="conclusion" class="section level2">
<h2>Conclusion</h2>
<p>Using the unnest_tokens() function, you can easily tokenize (or break down) text data into single words, two consecutive words, three consecutive words, and so forth by setting n equal to the number of words you would like your data broken into. From here, it is fairly easy to group by you words, bigrams, trigrams, etc. and create a count of those text chunks across your entire dataset. This allows you to look at the frequency of your tokens (in this case words) to further analyze your data.</p>
<p>As you can see by looking at the bar chart or Wordcloud in the above Hamlet example, words like “Ham”</p>
<p>Visualizations like bar charts and word clouds make it easier to digest the information you are gathering, and only require a few lines of code after tokenizing and cleaning your data!</p>
<p><br> <br></p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
